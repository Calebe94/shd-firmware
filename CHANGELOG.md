# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Added

### Changed

### Fixed

### Removed

## [0.11.0]

### Added

* Added `utils` library with some helpers such as `str_replace()`, `str_split()` and `url_decode()`;
* Added settings `set` and `get` address routes;
* Added address section on settings page;
* Added address `set` and `get` settings helpers;
 
### Changed

### Fixed

### Removed

## [0.10.0]

### Added

* Added rs485 wait transmission
* Added rs485 flush function;
* Added macro condition to initialize rs485 module. Now only the peripheral firmware will have RX queue;
* Added response box classes and ids to `modest.css`;
* Added functions to create`success` and `failure` responses;

### Changed

* Updated wifi ssid name depending on the mode and settings;
* Changed SIM7070G queues sizes;
* Changed get readings function to send request and read the response;
* Moved css from `_header.html` to `modest.css` file;
* Chaged `POST` routes to return the new response page with `success` or `failure` messages;

### Fixed

* Fixed typo in main;
* Fixed index page links;

### Removed

* Removed SIM7070G TX queue;
* Removed `message_process_handler()` from controller firmware;
* Removed `style css` from `_header.html` file;

## [0.9.0]

### Added

* Added phone to settings handler;
* Added get and set phone routes;
* Added phone section to settings page;
* Added dynamic phone placeholder;

### Changed

* Device mode section is now hide when device is controller;

### Fixed

### Removed

## [0.8.0]

### Added

* Added support to **SIM7070G** module;
* Added function to send **SMS**;

### Changed

### Fixed

### Removed

## [0.7.0]

### Added

* Added devices communication algorithm;
* Added `init_routes()` function to `web_api.h` file;

### Fixed

### Changed

* Renamed terms associeted with slavery to its alternatives;
* Changed flow sensor gpio from `4` to `15`;

### Removed

* Removed function `init_routes()` from main file;

## [0.6.0]

### Added

* Added [MinUnit](https://jera.com/techinfo/jtns/jtn002) test to test.c file;
* Added unit tests to `protocol_create_message` and `protocol_message_parse` from protocol lib;
* Added a `test` task pipeline;
* Added environment for the ESP32 WROVER board;

### Fixed

* Fixed a bug from `protocol_message_parse` where a null terminator was not beign added;

### Changed

* Changed `test` target to compile the `TEST_SRCS`;
* Updated README with ESP32 WROVER board infos;

### Removed

## [0.5.0]

### Added

* Added [MinUnit](https://jera.com/techinfo/jtns/jtn002) test to test.c file;
* Added unit tests to `protocol_create_message` and `protocol_message_parse` from protocol lib;
* Added a `test` task pipeline;

### Fixed

* Fixed a bug from `protocol_message_parse` where a null terminator was not beign added;

### Changed

* Changed `test` target to compile the `TEST_SRCS`;

### Removed

## [0.4.0]

### Added

* Added device id file handler(will be used by the main device);
* Added devices uri handlers;

### Fixed

### Changed

* Now when the device is `controler`, the form ID is hidden;
* When the device is `controller`, the form to register peripherals `ids` is shown;

### Removed

* Removed unecessary references to files and comments;

## [0.3.1]

### Added

### Fixed

### Changed

* Renamed peer to mode in the entire project;
* Updated README with latest changes;

### Removed

## [0.3.0]

### Added 

* Added protocol to parse RS485 messages with pretty simple Master-Slave support;
* Added rs485 event handler;
* Added wifi AP module;
* Added flash partition support;
* Added webserver to enter as device settings;
* Added settings data persistence;
* Added javascript file to manipulate html elements;
* Added webpage folder with the web static content;

### Fixed

### Changed

* Changed settings variables and functions names;

### Removed

* Removed html, js and css files from data folder. They'll be generated by **ssg5** script from `webpage` folder.

## [0.2.0]

### Added 

* Added max485 initialization;
* Added rs485 module interface;
* Added rs485 echo example to project;
* Added serial console module interface;

### Fixed

### Changed

* Updated README with usefull info and pipeline badge;

### Removed

## [0.1.0]

### Added 

* Added function calls to setup flowsensor
* Added install isr service call
* Added flowsensor module
* Added flow sensor math functions
* Added gitlab-ci file
* Added can receiver program to main
* Added mcp can lib as submodule
* Added platformio project
* Added artifacts

### Fixed

### Changed

* Updated flowsensor function calls
* Updated flow variables and equations
* Updated functions name
* Updated README with function info
* Updated firmware path in pipeline
* Updated README and removed readme.rst
* Changed project microcontroller to esp32
* Update .gitlab-ci.yml file
* Updated docker image
* Changed pins
* Updated README usefull info

### Removed

* Removed old .cpp main file

[unreleased]: https://gitlab.com/projeto-leitor-hidrometro/shd-firmware/-/compare/0.11.0...main
[0.11.0]: https://gitlab.com/projeto-leitor-hidrometro/shd-firmware/-/compare/0.10.0...0.11.0
[0.10.0]: https://gitlab.com/projeto-leitor-hidrometro/shd-firmware/-/compare/0.9.0...0.10.0
[0.9.0]: https://gitlab.com/projeto-leitor-hidrometro/shd-firmware/-/compare/0.8.0...0.9.0
[0.8.0]: https://gitlab.com/projeto-leitor-hidrometro/shd-firmware/-/compare/0.7.0...0.8.0
[0.7.0]: https://gitlab.com/projeto-leitor-hidrometro/shd-firmware/-/compare/0.6.0...0.7.0
[0.6.0]: https://gitlab.com/projeto-leitor-hidrometro/shd-firmware/-/compare/0.5.0...0.6.0
[0.5.0]: https://gitlab.com/projeto-leitor-hidrometro/shd-firmware/-/compare/0.4.0...0.5.0
[0.4.0]: https://gitlab.com/projeto-leitor-hidrometro/shd-firmware/-/compare/0.3.1...0.4.0
[0.3.1]: https://gitlab.com/projeto-leitor-hidrometro/shd-firmware/-/compare/0.3.0...0.3.1
[0.3.0]: https://gitlab.com/projeto-leitor-hidrometro/shd-firmware/-/compare/0.2.0...0.3.0
[0.2.0]: https://gitlab.com/projeto-leitor-hidrometro/shd-firmware/-/compare/0.1.0...0.2.0
[0.1.0]: https://gitlab.com/projeto-leitor-hidrometro/shd-firmware/-/tags/0.1.0

